---
title: "Notebook 01"
output: html_document
---

## R Notebooks

This file is called an R Notebook. It is a mixture of text (like this)
written in a format called *markdown*, and blocks of code that look
like this:

```{r}
2 + 2
```

You can run code a block of code by click on the green arrow in the top-left
of the code block. Try this on the block above; you should see the result of
the addition show up as a result below the code.

Most of the notes this semester will be given in the form of a new notebook.
During class we will work through the notes and embedded questions. Depending
on the pace of the day, we may not finishing all of the questions in the
notebook. You should try to finishing the remaining questions for homework
before the next class meeting.

Today we will cover some of the basics of running R code and introducing the
various parts of the RCloud software.

## Running R Code

We now want to give a very brief overview of how to run R code. We
will now only show snippets of R code and the output rather than a
screen shot of the entire RStudio session. Though, know that you
should think of each of the snippets as occuring inside of one of
the grey boxes in an RMarkdown file.

In one of its most basic forms, R can be used as a fancy calculator.
For example, we can divide 12 by 4:

```{r}
12 / 4
```

We can also store values by creating new *objects* within R. To do
this, use the `<-` (arrow) symbol. For example, we can create a new
object called `mynum` with a value of `8` by:

```{r}
mynum <- 3 + 5
```

We can now use our new object `mynum` exactly the same way that we we
would use the number 8. For example, adding it to 1 to get the number nine:

```{r}
mynum + 1
```

Object names must start with a letter, but can also use underscores and
periods. In my R code, I generally restrict myself to using only
lowercase letters and underscores. That makes it easier to read my code
later on without needing to remember if and where I used capital letters.

## Running functions

A function in R is something that takes a number of input values and
returns an output value. Generally, a function will look something like
this:

```{r, eval=FALSE}
function_name(arg1 = input1, arg2 = input2)
```

Where `arg1` and `arg2` are the names of the inputs to the function (they
are fixed) and `input1` and `input2` are the values that we will assign
to them. The number of arguments is not always two, however. There may be any
number of arguments, including zero. Also, there may be additional optional
arguments that have default values that can be modified.

Let us look at an example function: `seq`. This function returns a sequence
of numbers. We will can give the function two input arguments: the starting
point `from` and the ending point `to`.

```{r}
seq(from = 1, to = 7)
```

The function returns a sequence of numbers starting from 1 and ending at
7 in increments of 1. Note that you can also pass arguments *by position*, in
which case we use the default ordering of the arguments. Here is the same code
but without the names:

```{r}
seq(1, 7)
```

There is also an optional argument `by` that controls the spacing between
each of the numbers. By default it is equal to 1, but we can change
it to spread the point out by half spaces.

```{r}
seq(from = 1, to = 7, by = 0.5)
```

We will learn how to use numerous functions in the coming chapters.

## Formatting

It is very important to properly format your code in a consistent way.
Even though the code may run without errors and produce the desired results,
you should make sure that your code is well-formatted to make it easier to read
and debug in the future. We will follow the following guidelines:

- always put one space before and after an equals sign or assignment arrow
- always put one space after a comma, but no space before a comma
- always put one space around mathematical operations (such as `+` and `*`)

When running practice notebooks from this book, you should see a warning in the
margin of your R notebook whenever these rules are violated. It will make your
life a lot easier if you get used to these rules right from the start.

In the code block below, I wrote some code to add a new column to the dataset
that describes the population density for each city (1000s of people per square
kilometer) and sorts from the most dense to the least dense. We will learn
this code over the next 6 chapters. For now, I want to focus on formatting
the code correctly. I did not include any spaces! Put the correct spaces into
the code to make it match the style guide given in the notes.

```{r}
new_data<-mutate(cities,city_density=city_pop/city_area*1000)
new_data<-arrange(new_data,desc(city_density))
select(new_data,name,country,city_density)
```

Make sure to run the code after you are done. What city in the dataset has, on
average, the most people per square kilometer? **Answer**:

## Loading data

In this book we will be working with data that is stored in a tabular
format. Here is an example of a tabular dataset of food types, which
has nine rows and five columns. Each row tells us the nutritional
properties contained in 100 grams of a particular type of food.

<img src="images/tidy-0.png" style="padding-left: 15%; padding-right: 15%; padding-top: 5%">

Every row of the dataset represents a particular object in our dataset,
each of which we call an *observation*. In our food type example, each
individual food corresponds to a specific observation:

<img src="images/tidy-2.png" style="padding-left: 15%; padding-right: 15%; padding-top: 5%">

The columns in a tabular dataset represent the measurements that we
record for each observation. These measurements are called *variables*.
In our example dataset, we have five variables which record the name
of the food type, the food group that the food falls into, the number
of calories in a 100g serving, the amount of sodium (mg) in a 100g
serving, and the amount of vitamin A (as a percentage of daily recommended
value) in a 100g serving.

<img src="images/tidy-1.png" style="padding-left: 15%; padding-right: 15%; padding-top: 5%">

A larger version of this dataset, with more food types and nutritional
facts, is included in the course materials. We will make extensive use
of this dataset in the following chapters as a common example for creating
visualizations, performing data manipulation, and building models. In
order to read in the dataset we use a function called `read_csv` and
pass it a description of where the file is located relative to where
this script is stored. The data is called `foods.csv` and is stored in
the folder `data`. The following code will load the foods dataset into
R, save it as an object called `food`, and prints out the first several
rows:

```{r, message=FALSE}
food <- read_csv(file.path("data", "food.csv"))
food
```

Notice that the display shows that there are a total of 62 rows and
14 variables. The first 6 rows and 8 columns are shown. At the bottom,
the names of the additional variable names are given. As described
above, if you run this RStudio, you can view a full tabular version
of the dataset by clicking on the dataset name in the Environment tab.
The abbreviations `<chr>` and `<dbl>` tell us which variables are characters
(`item` and `food_type`) and numbers (all the others).

Many of the examples in the following chapters will make use of this foods
dataset to demonstrate new concepts. Another related dataset that will be also
be useful for illustrating several concepts contains the prices of various
food items for over 140 years. We can read it into R using similar block of
code, namely:

```{r, message=FALSE}
food_prices <- read_csv(file.path("data", "food_prices.csv"))
food_prices
```

Here, each observation is a year. Variables correspond to specific types of
food. Notice that this is different than the `foods` dataset, in which the
food items were observations.

## Practice: Running R Code

In the code block below, divide the number 57 by 3.

```{r}
57 / 3
```

Is the number 57 a prime number? **Answer**:

In the code block below, make a variable named `fav_number` and set it equal to
your favorite number. (Note, the quotes are not part of the variable name).

```{r}

```

In the code below, apply the function `log10` to your favorite number. (Again, the
quotes are not part of the function name).

```{r}

```

Note that the only point of the exercises here are to familiarize you with running
code in R, creating variables, and applying functions. We will get to more
interesting  tasks in the next chapter.

## Practice: Running Functions

R contains several functions for producing (pseudo)-random variables. These are
useful, for example, when using R to run simulation models. For example the
function `runif` selects (by default) a set of random numbers between 0 and 1.
It takes one required arugment named `n`, which indicates how many random numbers
should be generated. In the code below, use the `runif` function to produce 100
random numbers. Verify that each time you run the code a different set of
numbers is produced:

```{r}

```

The `runif` function also has two optional parameters. These are named `min` and
`max`; they determine the lower and upper bounds from which random numbers should
be generated. By default these are set to 0 and 1. In the code below, generate 100
random numbers between 50 and 100. Here, select the number of random numbers
*by position* (that is, without the code `n = 100`).

```{r}

```

A common concern for new R users when running the code above is the meaning behind
the numbers in square brackets to the left of the output. These are not part of the
output itself. Instead, they provide a counter telling you which result number appears
just to the left of right of it. The first line will always start with `[1]` because
it always starts with the first result. The second line's number will depend on the
width of your screen when you ran the code.

## Practice: Largest Cities Dataset

We will make extensive use of a dataset that has information about the largest
cities (by population) in the world. To read in and print out this dataset, run
the following lines of code:

```{r, message=FALSE}
cities <- read_csv(file.path("..", "data", "largest_cities.csv"))
cities
```

Looking at the data, try to answer the following questions.

How many rows are in the data set? **Answer**:

What are the observations in the dataset. **Answer**:

List three of the variables in the dataset. **Answer**:

The population variables are given in millions of people. How many
people live in all of Tokyo? **Answer**:

How people live in Atlanta (Note: you will have to open the data
explorer to see this data)? **Answer**:
